"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[95808],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(a),h=n,d=m["".concat(s,".").concat(h)]||m[h]||u[h]||i;return a?r.createElement(d,l(l({ref:t},p),{},{components:a})):r.createElement(d,l({ref:t},p))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var c=2;c<i;c++)l[c]=a[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},4043:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var r=a(83117),n=(a(67294),a(3905));const i={},l="Proxy",o={unversionedId:"interviewPrep/designPatterns/Structural_patterns/Proxy/readme",id:"interviewPrep/designPatterns/Structural_patterns/Proxy/readme",title:"Proxy",description:"- provide a substitute or placeholder for another object",source:"@site/docs/interviewPrep/designPatterns/Structural_patterns/Proxy/readme.md",sourceDirName:"interviewPrep/designPatterns/Structural_patterns/Proxy",slug:"/interviewPrep/designPatterns/Structural_patterns/Proxy/",permalink:"/docs/interviewPrep/designPatterns/Structural_patterns/Proxy/",draft:!1,editUrl:"https://github.com/reshinto/reshinto.github.io/blob/dev/docs/interviewPrep/designPatterns/Structural_patterns/Proxy/readme.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"TypeScript Example",permalink:"/docs/interviewPrep/designPatterns/Structural_patterns/Flyweight/typescript/"},next:{title:"C++ Example",permalink:"/docs/interviewPrep/designPatterns/Structural_patterns/Proxy/cPlusPlus/"}},s={},c=[{value:"typically, this pattern is used when",id:"typically-this-pattern-is-used-when",level:2},{value:"Why use a proxy",id:"why-use-a-proxy",level:2},{value:"Structure",id:"structure",level:2},{value:"Summary",id:"summary",level:2},{value:"When to apply",id:"when-to-apply",level:2},{value:"Pros and Cons",id:"pros-and-cons",level:2},{value:"Example",id:"example",level:2}],p={toc:c};function u(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,r.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"proxy"},"Proxy"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"provide a substitute or placeholder for another object",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"A proxy controls access to the original object, allowing you to perform something either before or after the request gets through to the original object"))),(0,n.kt)("li",{parentName:"ul"},"In other words by using proxy, one class provides functionality of another class",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Unlike Decorator, a Proxy usually manages the life cycle of its service object on its own"))),(0,n.kt)("li",{parentName:"ul"},"allow us to control access to an object"),(0,n.kt)("li",{parentName:"ul"},"original definition",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"to provide a surrogate or placeholder for another object to control access to it",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"the surrogate / placeholder is used to access the original object",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"in doing so, the placeholder is able to augment and change the contents of the original object",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"this is often needed to introduce a virtualization layer between the object and the consumer",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"when the consumer requests access to the object, it does so through the proxy"),(0,n.kt)("li",{parentName:"ul"},"the proxy then governs and modifies the data as needed by acting as a wrapper"))))))))))),(0,n.kt)("li",{parentName:"ul"},"important thing is that the interface offered to the consumer remains inline and consistent with the original object",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"can apply a proxy-like behavior by 2 ways",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"directly augmenting an object during access"),(0,n.kt)("li",{parentName:"ol"},"through composable wrappers",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"this is better and safer because it does not modify the original object")))))))),(0,n.kt)("h2",{id:"typically-this-pattern-is-used-when"},"typically, this pattern is used when"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"need to optimize or preprocessed data when the consumer accesses it"),(0,n.kt)("li",{parentName:"ul"},"caching remotely access data"),(0,n.kt)("li",{parentName:"ul"},"logging"),(0,n.kt)("li",{parentName:"ul"},"encryption"),(0,n.kt)("li",{parentName:"ul"},"simulating private and inaccessible properties"),(0,n.kt)("li",{parentName:"ul"},"data validation")),(0,n.kt)("h2",{id:"why-use-a-proxy"},"Why use a proxy"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"use an extra level of indirection to support distributed, controlled, or conditional access"),(0,n.kt)("li",{parentName:"ul"},"add a wrapper and delegation to protect the real component from undue complexity")),(0,n.kt)("h2",{id:"structure"},"Structure"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Proxy",src:a(17328).Z,width:"874",height:"830"})),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The Service Interface declares the interface of the Service."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"The proxy must follow this interface to be able to disguise itself as a service object."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The Service is a class that provides some useful business logic.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The Proxy class has a reference field that points to a service object."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"After the proxy finishes its processing (e.g., lazy initialization, logging, access control, caching, etc.), it passes the request to the service object."),(0,n.kt)("li",{parentName:"ul"},"Usually, proxies manage the full lifecycle of their service objects."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The Client should work with both services and proxies via the same interface."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This way you can pass a proxy into any code that expects a service object.")))),(0,n.kt)("h2",{id:"summary"},"Summary"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"the proxy pattern allows us to create placeholder wrappers for objects"),(0,n.kt)("li",{parentName:"ul"},"a proxy object allows external access control to the object"),(0,n.kt)("li",{parentName:"ul"},"implements the same interface as the original object"),(0,n.kt)("li",{parentName:"ul"},"the proxy api (ES6, ES2015) enables the creation of proxy wrappers for objects"),(0,n.kt)("li",{parentName:"ul"},"proxy implements traps for various kinds of access augmentation"),(0,n.kt)("li",{parentName:"ul"},"great for implementing middleware mechanism for caching, logging, encryption, and other kinds of augmented functionality as a virtualized proxy")),(0,n.kt)("h2",{id:"when-to-apply"},"When to apply"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"lazy initialization (virtual proxy) of a heavyweight service object that wastes system resources by being always up, but is needed from time to time",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Instead of creating the object when the app launches, you can delay the object's initialization to a time when it's really needed"))),(0,n.kt)("li",{parentName:"ul"},"access control (protection proxy)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"for letting only specific clients to be able to use the service object;",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"for instance, when your objects are crucial parts of an operating system and clients are various launched applications (including malicious ones)"))),(0,n.kt)("li",{parentName:"ul"},"The proxy can pass the request to the service object only if the client's credentials match some criteria"))),(0,n.kt)("li",{parentName:"ul"},"local execution of a remote service (remote proxy)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This is when the service object is located on a remote server"),(0,n.kt)("li",{parentName:"ul"},"In this case, the proxy passes the client request over the network, handling all the nasty details of working with the network"))),(0,n.kt)("li",{parentName:"ul"},"logging requests (logging proxy)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This is when you want to keep a history of requests to the service object"),(0,n.kt)("li",{parentName:"ul"},"The proxy can log each request before passing it to the service"))),(0,n.kt)("li",{parentName:"ul"},"caching request results (caching proxy)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This is when you need to cache results of client requests and manage the life cycle of this cache, especially if results are quite large"),(0,n.kt)("li",{parentName:"ul"},"The proxy can implement caching for recurring requests that always yield the same results"),(0,n.kt)("li",{parentName:"ul"},"The proxy may use the parameters of requests as the cache keys")))),(0,n.kt)("h2",{id:"pros-and-cons"},"Pros and Cons"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"pros"),(0,n.kt)("th",{parentName:"tr",align:null},"cons"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"controlling the service object without clients knowing about it"),(0,n.kt)("td",{parentName:"tr",align:null},"overcomplicated code since you need to introduce a lot of new classes")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"managing the lifecycle of the service object when clients don't care about it"),(0,n.kt)("td",{parentName:"tr",align:null},"the response from the service might get delayed")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"the proxy works even if the service object isn't ready or is not available"),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"introducing new proxies without changing the service or clients"),(0,n.kt)("td",{parentName:"tr",align:null})))),(0,n.kt)("h2",{id:"example"},"Example"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'// Presume we have an input filed with an ID of inputname:\nconst el = `<input type="text" id="inputname" value="" />`;\n\n// We also have a JS object named myUser with\n// an id property which references this input\nconst myUser = {\n  id: "inputname",\n  name: "",\n};\n\n// Our first objective is to update myUser.name\n// when a user changes the input value. This can be achieved\n// with an onchange event handler on the field:\n(function inputChange(myObject) {\n  if (!myObject || !myObject.id) return;\n\n  const input = document.getElementById(myObject.id);\n\n  input.addEventListener("onchange", function (e) {\n    myObject.name = input.value;\n  });\n})(myUser);\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'// create proxy\nconst myUserProxy = new Proxy(myUser, {\n  set: function (target, prop, newValue) {\n    if (prop === "name" && target.id) {\n      // update object property\n      target[prop] = newValue;\n\n      // update input field value\n      document.getElementById(target.id).value = newValue;\n\n      return true;\n    }\n\n    return false;\n  },\n});\n\n// set a new name\nmyUserProxy.name = "Craig";\n\nconsole.log(myUserProxy.name); // Craig\nconsole.log(document.getElementById("inputname").value);\n')))}u.isMDXComponent=!0},17328:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/proxy-185235198f4c9361c3095eee3eaa399f.png"}}]);