"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[9399],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=i.createContext({}),u=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=u(e.components);return i.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),d=u(t),m=r,b=d["".concat(s,".").concat(m)]||d[m]||p[m]||l;return t?i.createElement(b,o(o({ref:n},c),{},{components:t})):i.createElement(b,o({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=d;var a={};for(var s in n)hasOwnProperty.call(n,s)&&(a[s]=n[s]);a.originalType=e,a.mdxType="string"==typeof e?e:r,o[1]=a;for(var u=2;u<l;u++)o[u]=t[u];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9761:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>u});var i=t(7462),r=(t(7294),t(3905));const l={},o="Builder pattern",a={unversionedId:"interviewPrep/designPatterns/Creational_patterns/Builder/readme",id:"interviewPrep/designPatterns/Creational_patterns/Builder/readme",title:"Builder pattern",description:"- A builder builds anything that requires the culmination of multiple variant steps and processes that result in a finished entity",source:"@site/docs/interviewPrep/designPatterns/Creational_patterns/Builder/readme.md",sourceDirName:"interviewPrep/designPatterns/Creational_patterns/Builder",slug:"/interviewPrep/designPatterns/Creational_patterns/Builder/",permalink:"/docs/interviewPrep/designPatterns/Creational_patterns/Builder/",draft:!1,editUrl:"https://github.com/reshinto/reshinto.github.io/blob/dev/docs/interviewPrep/designPatterns/Creational_patterns/Builder/readme.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Abstract Factory",permalink:"/docs/interviewPrep/designPatterns/Creational_patterns/AbstractFactory/"},next:{title:"Factory",permalink:"/docs/interviewPrep/designPatterns/Creational_patterns/Factory/"}},s={},u=[{value:"Purpose for using it",id:"purpose-for-using-it",level:2},{value:"summary: A builder is essentially a separate component, so when piecewise object construction is complicated, provide an API for doing it succinctly",id:"summary-a-builder-is-essentially-a-separate-component-so-when-piecewise-object-construction-is-complicated-provide-an-api-for-doing-it-succinctly",level:3},{value:"Structure",id:"structure",level:2},{value:"Why do we need it",id:"why-do-we-need-it",level:2},{value:"example",id:"example",level:2},{value:"C#",id:"c",level:3},{value:"Fluent Builder inheritance with recursive generics",id:"fluent-builder-inheritance-with-recursive-generics",level:2},{value:"Functional Builder",id:"functional-builder",level:2},{value:"Faceted Builder",id:"faceted-builder",level:2}],c={toc:u};function p(e){let{components:n,...l}=e;return(0,r.kt)("wrapper",(0,i.Z)({},c,l,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"builder-pattern"},"Builder pattern"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A builder builds anything that requires the culmination of multiple variant steps and processes that result in a finished entity"),(0,r.kt)("li",{parentName:"ul"},"A builder understands the requirement in the easiest of expression and translates that into the outcome, using several complex internal processes"),(0,r.kt)("li",{parentName:"ul"},"Definition by the Gang of Four",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"A builder separates the construction of a complex object from its representation so that the same construction process can create different representations")))),(0,r.kt)("h2",{id:"purpose-for-using-it"},"Purpose for using it"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"some objects are simple and can be created in a single constructor call"),(0,r.kt)("li",{parentName:"ul"},"other objects require a lot of ceremony to create"),(0,r.kt)("li",{parentName:"ul"},"having an object with 10 constructor arguments is not productive",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"eg instead of concatenating multiple strings, use a string builder instead"))),(0,r.kt)("li",{parentName:"ul"},"instead, opt for piecewise construction",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"eg allow people to construct objects piece by piece"))),(0,r.kt)("li",{parentName:"ul"},"builder provides an API for constructing an object step by step")),(0,r.kt)("h3",{id:"summary-a-builder-is-essentially-a-separate-component-so-when-piecewise-object-construction-is-complicated-provide-an-api-for-doing-it-succinctly"},"summary: A builder is essentially a separate component, so when piecewise object construction is complicated, provide an API for doing it succinctly"),(0,r.kt)("h2",{id:"structure"},"Structure"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Builder",src:t(9943).Z,width:"966",height:"1188"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The Builder interface declares product construction steps that are common to all types of builders.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Concrete Builders provide different implementations of the construction steps."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Concrete builders may produce products that don\u2019t follow the common interface."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Products are resulting objects."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Products constructed by different builders don\u2019t have to belong to the same class hierarchy or interface."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The Director class defines the order in which to call construction steps, so you can create and reuse specific configurations of products.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The Client must associate one of the builder objects with the director."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Usually, it\u2019s done just once, via parameters of the director\u2019s constructor."),(0,r.kt)("li",{parentName:"ul"},"Then the director uses that builder object for all further construction."),(0,r.kt)("li",{parentName:"ul"},"However, there\u2019s an alternative approach for when the client passes the builder object to the production method of the director."),(0,r.kt)("li",{parentName:"ul"},"In this case, you can use a different builder each time you produce something with the director.")))),(0,r.kt)("h2",{id:"why-do-we-need-it"},"Why do we need it"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"because sometimes you just want a bit of convenience when building up objects",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"especially if those objects are complicated")))),(0,r.kt)("h2",{id:"example"},"example"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"the following is an example of not creating a html builder",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"resulting in a tedious method of creating a html")))),(0,r.kt)("h3",{id:"c"},"C#"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Not using a html builder")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'public class Program {\n  public static void Main() {\n    string hello = "hello";\n    // StringBuilder is a type of builder to build strings\n    System.Text.StringBuilder sb = new System.Text.StringBuilder();\n    sb.Append("<p>");\n    sb.Append(hello);\n    sb.Append("</p>");\n    System.Console.WriteLine(sb);\n\n    string[] words = new[] {"Hello", "World"};\n    sb.Clear();\n    sb.Append("<ul>");\n    foreach (string word in words)\n      sb.AppendFormat($"<li>{word}</li>");\n    sb.Append("</ul>");\n    System.Console.WriteLine(sb);\n    /*\n    <p>hello</p>\n    <ul><li>Hello</li><li>World</li></ul>\n    */\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Creating a html builder")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'using System.Collections.Generic;\n\npublic class HtmlElement {\n  public string Name, Text;\n  public List<HtmlElement> Elements = new List<HtmlElement>();\n  private const int indentSize = 2;\n\n  public HtmlElement() {\n  }\n\n  public HtmlElement(string name, string text) {\n    Name = name ?? throw new System.ArgumentNullException(paramName: nameof(name));\n    Text = text ?? throw new System.ArgumentNullException(paramName: nameof(text));\n  }\n\n  private string ToStringImpl(int indent) {\n    System.Text.StringBuilder sb = new System.Text.StringBuilder();\n    string i = new string(\' \', indentSize * indent);\n    sb.AppendLine($"{i}<{Name}>");\n\n    if (!string.IsNullOrWhiteSpace(Text)) {\n      sb.Append(new string(\' \', indentSize * (indent + 1)));\n      sb.AppendLine(Text);\n    }\n\n    foreach (var e in Elements) {\n      sb.Append(e.ToStringImpl(indent + 1));\n    }\n    sb.AppendLine($"{i}</{Name}>");\n    return sb.ToString();\n  }\n\n  public override string ToString() {\n    return ToStringImpl(0);\n  }\n}\n\npublic class HtmlBuilder {\n  private readonly string rootName;\n  HtmlElement root = new HtmlElement();\n\n  public HtmlBuilder(string rootName) {\n    this.rootName = rootName;\n    root.Name = rootName;\n  }\n\n  public void AddChild(string childName, string childText) {\n    HtmlElement e = new HtmlElement(childName, childText);\n    root.Elements.Add(e);\n  }\n\n  public override string ToString() {\n    return root.ToString();\n  }\n\n  public void Clear() {\n    root = new HtmlElement{Name = rootName};\n  }\n}\n\npublic class Program {\n  public static void Main() {\n    HtmlBuilder builder = new HtmlBuilder("ul");\n    builder.AddChild("li", "hello");\n    builder.AddChild("li", "world");\n    System.Console.WriteLine(builder.ToString());\n    /*\n    <ul>\n      <li>\n        hello\n      </li>\n      <li>\n        world\n      </li>\n    </ul>\n    */\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Fluent builder",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"enable chaining of methods")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'using System.Collections.Generic;\n\npublic class HtmlElement {\n  public string Name, Text;\n  public List<HtmlElement> Elements = new List<HtmlElement>();\n  private const int indentSize = 2;\n\n  public HtmlElement() {\n  }\n\n  public HtmlElement(string name, string text) {\n    Name = name ?? throw new System.ArgumentNullException(paramName: nameof(name));\n    Text = text ?? throw new System.ArgumentNullException(paramName: nameof(text));\n  }\n\n  private string ToStringImpl(int indent) {\n    System.Text.StringBuilder sb = new System.Text.StringBuilder();\n    string i = new string(\' \', indentSize * indent);\n    sb.AppendLine($"{i}<{Name}>");\n\n    if (!string.IsNullOrWhiteSpace(Text)) {\n      sb.Append(new string(\' \', indentSize * (indent + 1)));\n      sb.AppendLine(Text);\n    }\n\n    foreach (var e in Elements) {\n      sb.Append(e.ToStringImpl(indent + 1));\n    }\n    sb.AppendLine($"{i}</{Name}>");\n    return sb.ToString();\n  }\n\n  public override string ToString() {\n    return ToStringImpl(0);\n  }\n}\n\npublic class HtmlBuilder {\n  private readonly string rootName;\n  HtmlElement root = new HtmlElement();\n\n  public HtmlBuilder(string rootName) {\n    this.rootName = rootName;\n    root.Name = rootName;\n  }\n\n  // change void to HtmlBuilder to return this object\n  public HtmlBuilder AddChild(string childName, string childText) {\n    HtmlElement e = new HtmlElement(childName, childText);\n    root.Elements.Add(e);\n    return this;\n  }\n\n  public override string ToString() {\n    return root.ToString();\n  }\n\n  public void Clear() {\n    root = new HtmlElement{Name = rootName};\n  }\n}\n\npublic class Program {\n  public static void Main() {\n    HtmlBuilder builder = new HtmlBuilder("ul");\n    builder.AddChild("li", "hello").AddChild("li", "world");\n    System.Console.WriteLine(builder.ToString());\n  }\n}\n')),(0,r.kt)("h2",{id:"fluent-builder-inheritance-with-recursive-generics"},"Fluent Builder inheritance with recursive generics"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"builders inherit from other builders",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"will be problematic if used fluent interface approach")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},"using System;\nusing System.Collections.Generic;\n\npublic class Person\n{\n  public string Name;\n  public string Position;\n  public override string ToString()\n  {\n    return $\"{nameof(Name)}: {Name}, {nameof(Position)}: {Position}\";\n  }\n}\n\npublic class PersonInfoBuilder\n{\n  protected Person person = new Person();\n  public PersonInfoBuilder Called(string name)\n  {\n    person.Name = name;\n    return this;\n  }\n}\n\npublic class PersonJobBuilder : PersonInfoBuilder\n{\n  public PersonJobBuilder WorksAsA(string position)\n  {\n    person.Position = position;\n    return this;\n  }\n}\n\ninternal class Program\n{\n  public static void Main(string[] args)\n  {\n    var builder = new PersonJobBuilder();\n    builder.Called(\"Terence\").WorkAsA  // can't call WorkAsA method\n    // The reason why it's not working is because when you call the Called method, you return a PersonInfoBuilder\n    // PersonInfoBuilder doesn't know anything about WorkAsA method because it's not part of its inheritance hierarchy\n    // PersonInfoBuilder just gives you an interface to the PersonInfoBuilder\n    // Therefore the problem with inheritance of fluid interfaces is that you are not allowed to use the containing type as the return type\n    // This makes no sense because if you were to do this, eventually as soon as someone calls the Called method, you are degrading your builder from a PersonJobBuilder to a PersonInfoBuilder\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"1 way to get to get fluent interfaces to inherit is to use recursive generics approach",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"eg. class Foo : Bar\\<Foo",">")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'using System;\nusing System.Collections.Generic;\n\npublic class Person\n{\n  public string Name;\n  public string Position;\n\n  // use to expose own builder\n  // can try to prevent accessibility from outside, but is difficult to control effectively\n  // therefore, can make the builder internally and give it an internal constructor\n  // but cannot make it private as it is already being exposed through the api\n  public class Builder : PersonJobBuilder<Builder>\n  {\n  }\n\n  // whenever a new person is constructed, a new builder will be given\n  public static Builder New => new Builder();\n\n  public override string ToString()\n  {\n    return $"{nameof(Name)}: {Name}, {nameof(Position)}: {Position}";\n  }\n}\n\npublic abstract class PersonBuilder\n{\n  protected Person person = new Person();\n\n  public Person Build()\n  {\n    return person;\n  }\n}\n\n// class Foo : Bar<Foo>\npublic class PersonInfoBuilder<SELF>\n  : PersonBuilder\n  where SELF : PersonInfoBuilder<SELF>  // this is used to restrict SELF, and not int, string, etc.\n{\n  public SELF Called(string name)\n  {\n    person.Name = name;\n    return (SELF) this;  // need to cast (SELF) to work\n  }\n}\n\n// this class cannot be initialized directly as there will be type issue at SELF (eg. new PersonJobBuilder<???>)\npublic class PersonJobBuilder<SELF>\n  : PersonInfoBuilder<PersonJobBuilder<SELF>>\n  where SELF : PersonJobBuilder<SELF>  // this is used to restrict SELF, and not int, string, etc.\n{\n  public SELF WorksAsA(string position)\n  {\n    person.Position = position;\n    return (SELF) this;  // need to cast (SELF) to work\n  }\n}\n\ninternal class Program\n{\n  public static void Main(string[] args)\n  {\n    var me = Person.New.Called("Terence").WorksAsA("software engineer").Build();\n    Console.WriteLine(me);  // Name: Terence, Position: software engineer\n  }\n}\n')),(0,r.kt)("h2",{id:"functional-builder"},"Functional Builder"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"functional programming style")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'using System;\nusing System.Collections.Generic;\n\npublic class Person\n{\n  public string Name, Position;\n}\n\npublic class PersonBuilder\n{\n  private string Name, Position;\n\n  public readonly List<Action<Person>> Actions =\n    new List<Action<Person>>();\n\n  public PersonBuilder Called(string name)\n  {\n    Actions.Add(p => { p.Name = name; });\n    return this;\n  }\n\n  public Person Build()\n  {\n    var p = new Person();\n    Actions.ForEach(a => a(p));\n    Name = p.Name;\n    Position = p.Position;\n    return p;\n  }\n\n  public override string ToString()\n  {\n    return $"{nameof(Name)}: {Name}, {nameof(Position)}: {Position}";\n  }\n}\n\npublic static class PersonBuilderExtensions\n{\n  public static PersonBuilder WorkAsA(this PersonBuilder builder, string position)\n  {\n    builder.Actions.Add(p => { p.Position = position; });\n    return builder;\n  }\n}\n\nclass Program\n{\n  public static void Main(string[] args)\n  {\n    var pb = new PersonBuilder();\n    pb.Called("Terence").WorkAsA("software engineer").Build();\n    Console.WriteLine(pb);  // Name: Terence, Position: software engineer\n  }\n}\n')),(0,r.kt)("h2",{id:"faceted-builder"},"Faceted Builder"))}p.isMDXComponent=!0},9943:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/builder-8369eda61eae1b3e1156f09fb7aa3049.png"}}]);