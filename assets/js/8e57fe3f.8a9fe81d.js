"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[46429],{3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>p});var i=t(67294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function l(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?l(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,i,n=function(e,a){if(null==e)return{};var t,i,n={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var o=i.createContext({}),u=function(e){var a=i.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):r(r({},a),e)),t},d=function(e){var a=u(e.components);return i.createElement(o.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return i.createElement(i.Fragment,{},a)}},h=i.forwardRef((function(e,a){var t=e.components,n=e.mdxType,l=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=u(t),p=n,c=h["".concat(o,".").concat(p)]||h[p]||m[p]||l;return t?i.createElement(c,r(r({ref:a},d),{},{components:t})):i.createElement(c,r({ref:a},d))}));function p(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var l=t.length,r=new Array(l);r[0]=h;var s={};for(var o in a)hasOwnProperty.call(a,o)&&(s[o]=a[o]);s.originalType=e,s.mdxType="string"==typeof e?e:n,r[1]=s;for(var u=2;u<l;u++)r[u]=t[u];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}h.displayName="MDXCreateElement"},58111:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>u});var i=t(83117),n=(t(67294),t(3905));const l={},r="SQL Databases Scalability and Availability",s={unversionedId:"interviewPrep/system_design/memoryAndStorage/databases/12RelationalDatabases/scalabilityAndAvailability",id:"interviewPrep/system_design/memoryAndStorage/databases/12RelationalDatabases/scalabilityAndAvailability",title:"SQL Databases Scalability and Availability",description:"Designing highly scalable and highly available SQL databases",source:"@site/docs/interviewPrep/system_design/memoryAndStorage/databases/12RelationalDatabases/scalabilityAndAvailability.md",sourceDirName:"interviewPrep/system_design/memoryAndStorage/databases/12RelationalDatabases",slug:"/interviewPrep/system_design/memoryAndStorage/databases/12RelationalDatabases/scalabilityAndAvailability",permalink:"/docs/interviewPrep/system_design/memoryAndStorage/databases/12RelationalDatabases/scalabilityAndAvailability",draft:!1,editUrl:"https://github.com/reshinto/reshinto.github.io/blob/dev/docs/interviewPrep/system_design/memoryAndStorage/databases/12RelationalDatabases/scalabilityAndAvailability.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"PostgreSQL Relational Database example",permalink:"/docs/interviewPrep/system_design/memoryAndStorage/databases/12RelationalDatabases/example/"},next:{title:"Key-Value Stores",permalink:"/docs/interviewPrep/system_design/memoryAndStorage/databases/13Key-ValueStores/"}},o={},u=[{value:"Designing highly scalable and highly available SQL databases",id:"designing-highly-scalable-and-highly-available-sql-databases",level:2},{value:"Understand Scalability requirements",id:"understand-scalability-requirements",level:3},{value:"business requirements for database scalability",id:"business-requirements-for-database-scalability",level:4},{value:"identify use cases for data",id:"identify-use-cases-for-data",level:4},{value:"identify security and compliance requirements",id:"identify-security-and-compliance-requirements",level:4},{value:"estimate data growth",id:"estimate-data-growth",level:4},{value:"Database Architecture and Relational Databases",id:"database-architecture-and-relational-databases",level:3},{value:"Choose a datastore",id:"choose-a-datastore",level:4},{value:"identify schemas",id:"identify-schemas",level:4},{value:"identify key entities",id:"identify-key-entities",level:4},{value:"High-level physical design",id:"high-level-physical-design",level:4},{value:"Data Ingestion",id:"data-ingestion",level:3},{value:"human-scale and machine-scale data",id:"human-scale-and-machine-scale-data",level:4},{value:"different data ingestion strategies",id:"different-data-ingestion-strategies",level:4},{value:"designing scalable user interfaces",id:"designing-scalable-user-interfaces",level:4},{value:"message queues to buffer ingested data",id:"message-queues-to-buffer-ingested-data",level:4},{value:"data modeling for scale: event sourcing",id:"data-modeling-for-scale-event-sourcing",level:4},{value:"distributing workload: Command Query Response Separation (CQSR)",id:"distributing-workload-command-query-response-separation-cqsr",level:4},{value:"Designing for Scalable Querying",id:"designing-for-scalable-querying",level:3},{value:"transactional vs analytical queries",id:"transactional-vs-analytical-queries",level:4},{value:"indexing for transactional queries",id:"indexing-for-transactional-queries",level:4},{value:"materialized views for transactional queries",id:"materialized-views-for-transactional-queries",level:4},{value:"using read replicas to improve query performance",id:"using-read-replicas-to-improve-query-performance",level:4},{value:"understanding write ahead logging",id:"understanding-write-ahead-logging",level:4},{value:"de-normalizing for analytical queries",id:"de-normalizing-for-analytical-queries",level:4},{value:"aggregation and sampling for analytical queries",id:"aggregation-and-sampling-for-analytical-queries",level:4},{value:"DevOps for Scalable Relational Databases",id:"devops-for-scalable-relational-databases",level:3},{value:"monitoring relational databases",id:"monitoring-relational-databases",level:4},{value:"reducing latency with caching",id:"reducing-latency-with-caching",level:4},{value:"partitioning for scalability",id:"partitioning-for-scalability",level:4},{value:"high-availability architectures",id:"high-availability-architectures",level:4},{value:"data lifecycle management",id:"data-lifecycle-management",level:4}],d={toc:u};function m(e){let{components:a,...t}=e;return(0,n.kt)("wrapper",(0,i.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"sql-databases-scalability-and-availability"},"SQL Databases Scalability and Availability"),(0,n.kt)("h2",{id:"designing-highly-scalable-and-highly-available-sql-databases"},"Designing highly scalable and highly available SQL databases"),(0,n.kt)("h3",{id:"understand-scalability-requirements"},"Understand Scalability requirements"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"how do you know when you have a good database architecture?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"no 1 single ideal architecture"),(0,n.kt)("li",{parentName:"ul"},"the best architecture for a particular application depends on the business requirements or the organizational requirements"))),(0,n.kt)("li",{parentName:"ul"},"a scalable databases should be able to",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"support business and organization applications"),(0,n.kt)("li",{parentName:"ul"},"store as much data as needed",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"understand how much data needs to be stored"))),(0,n.kt)("li",{parentName:"ul"},"store data for as long as needed",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"understand the lifecycle of how long we need to keep the data"))),(0,n.kt)("li",{parentName:"ul"},"responsive",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"who needs to access the data"),(0,n.kt)("li",{parentName:"ul"},"here we are concerned with low latency",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"for both writing and reading data"))))),(0,n.kt)("li",{parentName:"ul"},"available and reliable")))),(0,n.kt)("h4",{id:"business-requirements-for-database-scalability"},"business requirements for database scalability"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"goal is to provide data storage services as required by business or organization requirements"),(0,n.kt)("li",{parentName:"ul"},"key questions about data that we should be asking",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"what data are we working with? (known as data modeling)"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"once identified, first need to get the rough boundaries around the domains that we talk about",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"the domains are like a subject area and it's defined by a certain set of coherent business processes and related pieces of data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: domains around sales, domains around inventory. domains around logistics, etc."),(0,n.kt)("li",{parentName:"ul"},"also possible to have overlap between domains"))),(0,n.kt)("li",{parentName:"ul"},"we then need to be able to identify the entities in them"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"how is it structured?"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"is it highly structured and tabular or is it semi-structured, like documents with varying attributes?"),(0,n.kt)("li",{parentName:"ul"},"or is it pretty freeform like natural language text?"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"how does entities relate?"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"once the entities are identified, we want to model how they relate",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"does a particular sales transaction relate to a customer?"),(0,n.kt)("li",{parentName:"ul"},"how does an order relate to multiple order items?"))))),(0,n.kt)("li",{parentName:"ul"},"we also need to identify the attributes of the entities",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"what information do we have to keep on a customer?"))))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"how much data?"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"what is the current volume? (what are you storing already)"),(0,n.kt)("li",{parentName:"ul"},"how much data is coming in?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"what is the rate of ingestion (is it every day or every hour, etc.)"),(0,n.kt)("li",{parentName:"ul"},"look at ",(0,n.kt)("inlineCode",{parentName:"li"},"domain-driven events"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"if we understand the frequency with which they occur (how much data is involved with each one), then we can start getting a sense of what our data generation is going to look like"),(0,n.kt)("li",{parentName:"ul"},"e.g.: a sale or new shipment that's received at a warehouse and inventory is loaded up or data comes in from IoT sensors every 30 seconds"))))),(0,n.kt)("li",{parentName:"ul"},"will there be data growth?\ne.g.: what are the other things going on in the business that are going to increase the size of the data that we need to deal with?"),(0,n.kt)("li",{parentName:"ul"},"what is the lifecycle of the data? (how long are we going to store the data)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"what ways are we going to store the data throughout its lifecycle"))),(0,n.kt)("li",{parentName:"ul"},"does the data changes over time?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we need to try to plan for possible changes",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: we may be modeling things differently a year from now that we are today"))))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"how is the data being used? (mostly to do with interactive transactions)"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"are we doing sales transactions?"),(0,n.kt)("li",{parentName:"ul"},"are we monitoring manufacturing devices?"),(0,n.kt)("li",{parentName:"ul"},"are we saving the data for compliance reasons?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we might not be interested in the data for querying or need rapid access, but needs to be around in case it is required"))),(0,n.kt)("li",{parentName:"ul"},"are we using data for data-driven decision making?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"using data by aggregating it for intelligence applications, data science, machine learning"),(0,n.kt)("li",{parentName:"ul"},"using data to alert on anomalous events")))))))))),(0,n.kt)("h4",{id:"identify-use-cases-for-data"},"identify use cases for data"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"the data life cycle is defined by how we use the data"),(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we might have sales transaction data that's used to help us execute an order and fulfill orders"),(0,n.kt)("li",{parentName:"ul"},"there may be geolocation data, which is also used to help trigger certain kinds of offers to customers, but these data may be used in other ways as well, after that immediate use"))),(0,n.kt)("li",{parentName:"ul"},"thus we need to take into account the sort of initial immediate use case of data"),(0,n.kt)("li",{parentName:"ul"},"we also need to look into how it might be used in the future as well",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"these different uses lead to different workloads",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"when we're talking about workloads",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we want to look at how data is generated"),(0,n.kt)("li",{parentName:"ul"},"how it's ingested into our storage and analysis systems"),(0,n.kt)("li",{parentName:"ul"},"how it's stored"))))),(0,n.kt)("li",{parentName:"ul"},"We also want to know how the data's used"),(0,n.kt)("li",{parentName:"ul"},"How is it reported and analyzed and visualized"))),(0,n.kt)("li",{parentName:"ul"},"an important aspect of thinking about scalability in databases is understanding the way we access the data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"for read-write intensive",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"typically require fairly low latency on both writing the data and reading the data"),(0,n.kt)("li",{parentName:"ul"},"e.g.: transaction processing systems"))),(0,n.kt)("li",{parentName:"ul"},"for bulk load intensive",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"have more tolerant of higher latency, but we query larger data sets"),(0,n.kt)("li",{parentName:"ul"},"e.g.: Data warehousing"))))),(0,n.kt)("li",{parentName:"ul"},"we need to understand what are the particular access patterns for the data that is stored in our system",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"during sales transaction",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"a retailer might sell products on an e-commerce marketplace, and they collect the data about customers and sales transaction and that gets used to maintain products and inventory and determine which products are being shipped out on any given day"),(0,n.kt)("li",{parentName:"ul"},"But the data can also be used for other things, like updating the finance system and making sure the inventory database is up to date"),(0,n.kt)("li",{parentName:"ul"},"the data may also be used by decision makers and analysts who are accumulating the data in a data warehouse and are using that data for data-driven decision-making"))),(0,n.kt)("li",{parentName:"ul"},"in equipment monitoring",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we may have sensors that collect data on the operating characteristics of manufacturing machines or other devices"),(0,n.kt)("li",{parentName:"ul"},"if the data's sent every 30 seconds from sensors to an Edge device and that Edge device buffers and pre-processes the data, and then the data is sent to a centralized ingestion point",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"in this case, we have a stream of data that we might analyze for anomalous events, and we might also use that data to train machine learning models, to help us predict failures in this equipment"))))),(0,n.kt)("li",{parentName:"ul"},"a customer engagement",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we may have diverse data sets about customer sales, their website browsing habits, product reviews and other kinds of demographics about people"),(0,n.kt)("li",{parentName:"ul"},"the goal is to increase the gross margin on the average sale, say by 10%, and for that to happen, we need to identify customers most likely to buy higher margin products"))))))),(0,n.kt)("li",{parentName:"ul"},"thus, we have workloads that require data engineers to collect, transform and store data in an analytical database, and then machine learning engineers to build predictive models",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it is operation driven by a business or organization needs for data"),(0,n.kt)("li",{parentName:"ul"},"workloads are often multi-step",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"there's multiple tasks that are performed on the data before and after it's stored in the database"))),(0,n.kt)("li",{parentName:"ul"},"there are also dependencies",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"No data's an island, so workload depends on other workloads and maybe other data sources")))))),(0,n.kt)("h4",{id:"identify-security-and-compliance-requirements"},"identify security and compliance requirements"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Security",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"in security we're talking about",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"confidentiality of data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it is about limiting access to data to those that need it to do their jobs"),(0,n.kt)("li",{parentName:"ul"},"this follows from the Principle of Least Privilege",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"The idea here is that anyone doing a particular job working with data or applications, they have all the privileges they need to get their jobs done, but they don't have more"),(0,n.kt)("li",{parentName:"ul"},"So if you don't need access to a certain set of data to do your job, then you shouldn't have permission to view that data"))),(0,n.kt)("li",{parentName:"ul"},"We also depend on identity and access management systems"),(0,n.kt)("li",{parentName:"ul"},"also depends on encryption, both when data is in motion or in transit, as well as at rest, when it's persisted"),(0,n.kt)("li",{parentName:"ul"},"And increasingly important is Data Loss Prevention",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"that's basically monitoring traffic on your network or analyzing content in data stores to make sure that sensitive data like government-identifying numbers or other personally-identifying information isn't readily accessible in places that it shouldn't be"))))),(0,n.kt)("li",{parentName:"ul"},"availability of that data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we're talking about having access to data when it's needed"),(0,n.kt)("li",{parentName:"ul"},"includes things like having a reliable database and connections to that database"),(0,n.kt)("li",{parentName:"ul"},"to achieve availability, or high availability, may require replication of data"),(0,n.kt)("li",{parentName:"ul"},"in the event of a disruption we can get data from one of the replicas to restore within recovery point objectives",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"a set of disks go down in an array or one note on a cluster goes down"),(0,n.kt)("li",{parentName:"ul"},"in the event of a significant disruption, if there's been a massive power outage or a natural disaster, and a data center is lost, we still need to plan for having high availability or recoverability by restoring our data system to a disaster resource center or in the cloud somewhere",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"In that case, we want to think about restoring within some recovery point objective,",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"like how long will it take to get a certain amount of data and application accessible again?"))))))))))),(0,n.kt)("li",{parentName:"ul"},"maintaining the integrity of the data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it means we want to make sure that data is correct and it hasn't been tampered with"),(0,n.kt)("li",{parentName:"ul"},"identity and access management plays a role here\nthe principle of least privilege also applies"),(0,n.kt)("li",{parentName:"ul"},"target integrity measures",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: sometimes when we're talking about integrity, we use very, sort of tightly-focused operations like calculating a message digest over a piece of text or a piece of data to ensure that, if that piece of data is tampered with and somebody else calculates the same message digest, they're going to get a different number and know that something has gone wrong"))),(0,n.kt)("li",{parentName:"ul"},"expansive integrity measures",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: full-fledged audits across an organization that look at data and systems and how we manage them and what operations have been applied to particular pieces of data"))))))),(0,n.kt)("li",{parentName:"ul"},"we want to focus on who can do what to which pieces of data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"structure and organization of data"),(0,n.kt)("li",{parentName:"ul"},"how entities relate"))))),(0,n.kt)("li",{parentName:"ul"},"Compliance",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"It's about institutional industry and government policies and laws"),(0,n.kt)("li",{parentName:"ul"},"it vary by region and industry, but dictate what we can do with data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"current volume, rate of ingestion, rate of growth, duration of lifecycle"),(0,n.kt)("li",{parentName:"ul"},"structure and organization of data"),(0,n.kt)("li",{parentName:"ul"},"how entities relate"))),(0,n.kt)("li",{parentName:"ul"},"what we're talking about are rules that govern what we do with data"),(0,n.kt)("li",{parentName:"ul"},"these are designed to protect individuals, organizations and larger social groups and institutions"),(0,n.kt)("li",{parentName:"ul"},"it is a set of constraints on what we can do with the data"),(0,n.kt)("li",{parentName:"ul"},"it also can dictate how we protect the data, what's required of us if we are going to collect and store certain types of data, particularly personally-identifying information or other kinds of confidential information"))),(0,n.kt)("li",{parentName:"ul"},"Sources of Policies",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"these policies that we comply with come from different places"),(0,n.kt)("li",{parentName:"ul"},"organization-specific policies",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it may have its own policies and these are internal to the organization and they're set by the decision makers in that organization about how data's collected, how it's used and maintained"))),(0,n.kt)("li",{parentName:"ul"},"industry-specific policies",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"this is essentially all the participants in an industry, like the payment credit card industry for example, might come up with a set of rules"),(0,n.kt)("li",{parentName:"ul"},"So if you are to accept credit or debit cards, you must follow these set of rules",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: PCI-DSS is one set of regulations that are from an industry"))))),(0,n.kt)("li",{parentName:"ul"},"government-specific policies",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"these are regulations that are specified law and government policies"),(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"in the United States, there is HIPAA, which is a healthcare regulation"),(0,n.kt)("li",{parentName:"ul"},"in the European union, there's GDPR, which is a broader privacy directive"))),(0,n.kt)("li",{parentName:"ul"},"depending on where you are and what data you're storing, different policies may apply to your compliance practices")))))),(0,n.kt)("h4",{id:"estimate-data-growth"},"estimate data growth"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"one of the key things to remember is that the data growth influences our data architecture, our data model and the cost of maintaining a scalable database"),(0,n.kt)("li",{parentName:"ul"},"So we need to consider growth factors",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"like the data generation process",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"increased application use (What's the number of users or sensors or customers, those domain entities that we're modeling that generate the data that lead to events which generate data)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"As more users and existing users place more demand on a system, there will be more data we need to manage"),(0,n.kt)("li",{parentName:"ul"},"people develop new business operations or new business processes which lead to new workloads that might read from the database, a data warehouse or lead to the need for new extraction transformation and load processes"),(0,n.kt)("li",{parentName:"ul"},"changes in business processes that lead to new services that depend on the database",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: a new database application which targets particular customers with particular kinds of offers, that might not exist today, but given some developments in improved data collection and application of machine learning algorithms, it might be possible to do something like that"),(0,n.kt)("li",{parentName:"ul"},"That new service will be of great value to the business or potentially a great value, but it also places additional load on the application and the data that we're working with"))))),(0,n.kt)("li",{parentName:"ul"},"Are there new data sources, that we have to account for including external sources?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"We may not be using them now, but we anticipate using them in the future"),(0,n.kt)("li",{parentName:"ul"},"here we can think about the way at very coarse-grained levels, data is generated"),(0,n.kt)("li",{parentName:"ul"},"human-scale data generation",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"so you can think of every piece of data must be generated by a human",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: typing in their name and address on a form or something, that's kind of human-scale data generation"))))),(0,n.kt)("li",{parentName:"ul"},"machine generated data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: your mobile device transmitting geolocation information every few seconds or time series data being pulled in from an IoT application, say every minute or every 30 second from thousands of sensors, the scale is significantly different"))),(0,n.kt)("li",{parentName:"ul"},"data augmentation using third party data sources",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"there is a possibility that in addition to the data that we're generating in our domain events that generate the data, there's data augmentation, and that can happen after the fact where we say use third-party services that give us additional data"),(0,n.kt)("li",{parentName:"ul"},"e.g.: we might have information about customers and some basic demographics but we use third-party service to give us hundreds or thousands of other attributes about those customers"))))))),(0,n.kt)("li",{parentName:"ul"},"we need to think about how we'll manage the data, once it's generated (Data Lifecycle Management)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"What data do we keep, where do we keep it and how long do we keep it?"),(0,n.kt)("li",{parentName:"ul"},"not all data is subject to the same access patterns",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This is especially the case with older data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: older data is less likely to be queried than newer data, especially if we're talking about things like time series data or monitoring data"))),(0,n.kt)("li",{parentName:"ul"},"we might want to use tiered data storage for older data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"there's different kinds of tiers",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"There's what's considered hot storage, where we need very low latency access"),(0,n.kt)("li",{parentName:"ul"},"there's more colder storage and there's different names for it",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"like near line is not quite hot but not quite cold"),(0,n.kt)("li",{parentName:"ul"},"there's cold line storage"),(0,n.kt)("li",{parentName:"ul"},"there's archive storage"))))),(0,n.kt)("li",{parentName:"ul"},"depending on the frequency or the rate at which you need to access data, you might store that data in different kinds of systems"))),(0,n.kt)("li",{parentName:"ul"},"when do you remove data from the database and keep it in lower cost object stores",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: if you are required by compliance regulations to keep data for seven years, but you know you'll never query if there's no business requirement to store data in a queryable form for greater than three years"),(0,n.kt)("li",{parentName:"ul"},"after the three year mark you may just export that data and store it in an object store, like a cloud storage system"),(0,n.kt)("li",{parentName:"ul"},"then, in years between year three and year seven, if you need to access data, you can go out to the object store, get up the particular file that has the data you need and then reload it into the database")))))))))),(0,n.kt)("h3",{id:"database-architecture-and-relational-databases"},"Database Architecture and Relational Databases"),(0,n.kt)("h4",{id:"choose-a-datastore"},"Choose a datastore"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"as we consider designing a scalable database, one of the first things we need to decide is what type of data store we're going to use",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"relational databases"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it have been the workhorse of database applications, especially in enterprises and large organizations"),(0,n.kt)("li",{parentName:"ul"},"relational databases are designed for use with fixed schemas",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"that means that the information we're capturing is fairly well structured, it's well defined, it's fairly static"),(0,n.kt)("li",{parentName:"ul"},"most of the entities that we're describing all need to be described with virtually the same attributes"),(0,n.kt)("li",{parentName:"ul"},"When that's the case, we can organize the data in highly structured rows and tables, and that provides a lot of advantages",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"One of the biggest is that we can use a standard query language called SQL"))))),(0,n.kt)("li",{parentName:"ul"},"relational databases have long supported ACID transactions, which are really important for business applications in particular",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"that ensures that a logical business operation either completes or fails, but there's never partially done and partially undone",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: you wouldn't want to make a transfer from one account in your bank to another account, and have the money withdrawn from one account, but not posted to the second account"),(0,n.kt)("li",{parentName:"ul"},"That kind of logical transfer is a transaction from a database perspective, and either both operations succeed or both fail"))))),(0,n.kt)("li",{parentName:"ul"},"an example of a relational database is PostgreSQL, which is a widely used open source database",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"There are many others, MySQL is a popular open source database, also SQL Server from Microsoft, Oracle database"))),(0,n.kt)("li",{parentName:"ul"},"summary",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"highly structured, data is transactional, difficult to scale"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"NoSQL databases"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it is non-relational"),(0,n.kt)("li",{parentName:"ul"},"some NoSQL databases are supporting ACID transaction, and that will probably grow, but that is something that relational databases have had from the beginning"),(0,n.kt)("li",{parentName:"ul"},"regarding ACID transactions, part of that is having consistent reads",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"With NoSQL, one of the things that NoSQL databases do is it replicates data, so there are multiple copies of data, and that makes it more efficient to do very large numbers of reads"),(0,n.kt)("li",{parentName:"ul"},"However, that creates a situation where there may be times where copies are out of sync",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: one replica might be updated at time one, but another replica might not be updated until time three, but at time two, another replica was read, but that data was not consistent with what was the latest data"),(0,n.kt)("li",{parentName:"ul"},"eventually all of the replicas have the same data"))),(0,n.kt)("li",{parentName:"ul"},"if you can tolerate that delay, then NoSQL databases may be a good option"))),(0,n.kt)("li",{parentName:"ul"},"there's no single type of NoSQL database, there's at least three broad categories",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"what happened was, people were adding more and more data to relational databases, and it was starting to hit performance walls"),(0,n.kt)("li",{parentName:"ul"},'So people took a look and decided, "Well, what can we trade off in terms of features in relational databases, in such a way that we get the performance we want, but we lose certain features?" Well, out of that kind of questioning and exploration came three types of NoSQL databases',(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"document databases"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it is designed for semi-structured data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"similar to JSON and the idea of having key value pairs, and then some of those values can themselves be structured items like other JSON structures or arrays"))),(0,n.kt)("li",{parentName:"ul"},"it's a hierarchical structure, but it can vary from one entity to another"),(0,n.kt)("li",{parentName:"ul"},"Another thing that is different from relational databases is that in document databases, we store related information together",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: a customer and their address may be stored together in the same JSON structure, whereas in our relational database, we'd be more likely to have customers modeled in one table and addresses in another"))),(0,n.kt)("li",{parentName:"ul"},"A popular document database is MongoDB"),(0,n.kt)("li",{parentName:"ul"},"there are others like Couchbase, Cloud Fire Store in Google Cloud"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"wide column databases"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"they're semi-structured",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"the set of attributes that we track across entities and across instances of entities can vary"))),(0,n.kt)("li",{parentName:"ul"},"it's modeled after something known as a sparse multidimensional matrix",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"if you think of a table like an Excel spreadsheet and then think of multiple sheets, t's almost like in 3D is a three dimensional matrix"),(0,n.kt)("li",{parentName:"ul"},"if done with many more dimensions, its a multidimensional matrix"),(0,n.kt)("li",{parentName:"ul"},"by sparse we mean that oftentimes many of the attributes aren't actually filled in, we don't actually have values for them",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"people take advantage of that fact to make highly efficient storage structures"))))),(0,n.kt)("li",{parentName:"ul"},"similarly with document databases, we typically store related information together (in a single row), because we don't work with joins"),(0,n.kt)("li",{parentName:"ul"},"sometimes we group columns together",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: columns that are related to, say customer, are grouped together, columns that are related to address are grouped together, and those are grouped into something called column families"),(0,n.kt)("li",{parentName:"ul"},"rows are defined as a set of column families"))),(0,n.kt)("li",{parentName:"ul"},"Cassandra is a example of a wide column database"),(0,n.kt)("li",{parentName:"ul"},"Google Bigtable is another example"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"graph databases"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it can be structured or semi-structured, there's sort of a spectrum",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it's really useful for working with both"))),(0,n.kt)("li",{parentName:"ul"},"it models the data store on a directed graph",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"can think of that as a set of nodes that have connections or links between them"),(0,n.kt)("li",{parentName:"ul"},"e.g.: a directed graph could model cities and roads that go between cities"))),(0,n.kt)("li",{parentName:"ul"},"when we talk about directed graphs, we often talk about nodes and edges",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g. a node is a city and edges, which might model a road",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"those nodes and edges themselves have properties"),(0,n.kt)("li",{parentName:"ul"},"a city might have a name, a population"),(0,n.kt)("li",{parentName:"ul"},"A road might have maximum speed, minimum speed, certain other descriptive properties"))))),(0,n.kt)("li",{parentName:"ul"},"A widely used graph database is Neo4j"))))))),(0,n.kt)("li",{parentName:"ul"},"summary",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"good for semi-structured data, it has eventual consistency, is highly scalable"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"analytical databases")," (most recent)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it is designed for data warehousing and large scale analytics"),(0,n.kt)("li",{parentName:"ul"},"they were designed in response to the limitations of relational databases"),(0,n.kt)("li",{parentName:"ul"},"these are structured databases",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"So they're fairly fixed structures"),(0,n.kt)("li",{parentName:"ul"},"but the focus is on how much data you're using and how you're using it"),(0,n.kt)("li",{parentName:"ul"},"its no longer in the realm of transactions and updating a small number of rows"))),(0,n.kt)("li",{parentName:"ul"},"they may use SQL, but they're not relational",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: Google BigQuery is an analytical database",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"It's structured, it uses tables, it has SQL, but it's not a relational database"))))),(0,n.kt)("li",{parentName:"ul"},"it's designed for large volumes of data, it doesn't have a lot of the features of traditional relational databases"),(0,n.kt)("li",{parentName:"ul"},"it relies on massively parallel scans, there are no indexes, and it's not designed for transactions"),(0,n.kt)("li",{parentName:"ul"},"they tend to be read intensive and focused on reading large amounts of data and doing like aggregate operations or analysis on them"),(0,n.kt)("li",{parentName:"ul"},"So you wouldn't use an analytical database say for an eCommerce site, analytical databases are structured and look very similar to relational, but they're designed are optimized for doing large scale aggregate data analysis"),(0,n.kt)("li",{parentName:"ul"},"summary",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"structured, scalable, not transactional")))))))),(0,n.kt)("h4",{id:"identify-schemas"},"identify schemas"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The idea of a schema is a fundamental concept in database design"),(0,n.kt)("li",{parentName:"ul"},"a schema is a logical extraction"),(0,n.kt)("li",{parentName:"ul"},"It's a collection of related database objects"),(0,n.kt)("li",{parentName:"ul"},"in relational databases, when we talk about schemas, we are talking about a lot of different kinds of objects that are used to implement the physical database",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"they include things like tables, indexes, sequences, triggers, constraints, and other objects that we create within a relational database"))),(0,n.kt)("li",{parentName:"ul"},"the grouping factor is that all of these entities are from a single business domain",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"what constitutes a domain?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"a set of entities",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"these are descriptive things"),(0,n.kt)("li",{parentName:"ul"},"these are the nouns within the business process that we talk about"),(0,n.kt)("li",{parentName:"ul"},"e.g.: things like customers and products and inventory levels"))),(0,n.kt)("li",{parentName:"ul"},"entities have logical relationships",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: customers have one or more addresses, orders have one or more order items, and orders draw on certain products which have inventory levels in different warehouses"),(0,n.kt)("li",{parentName:"ul"},"All of those things like products and warehouses and customers and orders, they're all logically related"))),(0,n.kt)("li",{parentName:"ul"},"data that's used together",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: customers and addresses and orders, clearly used together",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"customers and inventory levels, maybe yes, they're related. Of course we can find a logical path from a customer to an inventory level, but they're really not the same domain"))))),(0,n.kt)("li",{parentName:"ul"},"share a data lifecycle",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"data lifecycle is one of the things that distinguishes different domains"),(0,n.kt)("li",{parentName:"ul"},"how is the data created? How long is it kept? How is it used?"),(0,n.kt)("li",{parentName:"ul"},"If you see distinct patterns in life cycles, then that's a good indication you're probably talking about different domains, or at least different use cases over a particular domain"))),(0,n.kt)("li",{parentName:"ul"},"may model a business process",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we may have one domain, but we may have two different business processes that are being modeled",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"that's why we have different life cycles"),(0,n.kt)("li",{parentName:"ul"},"we want to watch out for this when we're doing our design work"))))))))),(0,n.kt)("li",{parentName:"ul"},"in terms of domains and schemas",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"ideally we have no more than one domain per schema"),(0,n.kt)("li",{parentName:"ul"},"domains may be complicated enough that they warrant having multiple schemas",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"different organizational ownership",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: one business unit is responsible for a certain set of data and entities and business processes, and a different group is responsible for a different set and now their data is related, but because of the organizational structure, you really want to model your data model in a way that respects and reflects the organizational structure"))),(0,n.kt)("li",{parentName:"ul"},"size and complexity",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: You may have a single domain and you may have a single business process but it's just so complicated that you need to break it up into sub units, and that happens quite commonly"))),(0,n.kt)("li",{parentName:"ul"},"independent processes",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"this is tied to the life cycles"),(0,n.kt)("li",{parentName:"ul"},"You have different life cycles, different use cases, different kinds of workloads"),(0,n.kt)("li",{parentName:"ul"},"You want to manage them differently",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"might wanna break up domains into using multiple schemes"))))),(0,n.kt)("li",{parentName:"ul"},"wrap monitoring, compliance, decision making"))))),(0,n.kt)("li",{parentName:"ul"},"examples of domains",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"in the insurance industry, we might have policies and insurance companies also pay claims against policies",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Those are clearly two distinct domains"))),(0,n.kt)("li",{parentName:"ul"},"in manufacturing, we have supplies and we have products that have certain inventory levels and we track those",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"But then there also may be schedules that particular items are going to be manufactured on a particular date or a set of dates"),(0,n.kt)("li",{parentName:"ul"},"Those two things are clearly related, but independent enough that they warrant being modeled in separate domains"))),(0,n.kt)("li",{parentName:"ul"},"in retail, the sales transaction is clearly one domain which is independent of inventory",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"they're related, but managing inventory is a really distinct business process"),(0,n.kt)("li",{parentName:"ul"},"that would warrant its own domain")))))))),(0,n.kt)("h4",{id:"identify-key-entities"},"identify key entities"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Early in our design process as we're thinking about scalable databases, one of the things we need to do is identify the entities that we're going to be working with",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"primarily the core entities, the most important ones"))),(0,n.kt)("li",{parentName:"ul"},"when we think of entities",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we can think of them as the logical representation of the things in a particular business domain or an application domain"),(0,n.kt)("li",{parentName:"ul"},"One way to think about it is the entities are the nouns",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"When we talk about like business processes and things like that, and things happening, entities are the things that are doing things or things are happening to them"))),(0,n.kt)("li",{parentName:"ul"},"some entities are more important than others",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"It's like that commonly cited 80, 20 rule",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: 80% of the work that we'll do is probably with 20% of the entities, and that's because some things are just more important"))))),(0,n.kt)("li",{parentName:"ul"},"analogous to objects in a solar system, some revolve around others",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"they are the focus and other things revolve around those entities, so in some ways it's kind of like the sun and planets in the solar system and moons and other minor objects revolve around these larger things"),(0,n.kt)("li",{parentName:"ul"},"it's easy to see when you think about certain domains like in insurance, policies and claims are the big things (major entities)"),(0,n.kt)("li",{parentName:"ul"},"then you can start thinking about, well, what entities are related to those"))))),(0,n.kt)("li",{parentName:"ul"},"another way to start discovering entities is to describe the business process or describe the thing that you're trying to model",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"describe a sales transaction",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"can start by thinking, a customer logs in and then the customer looks around and browses through the catalog, maybe does some comparisons between different products and then chooses one or two and actually orders them, goes through the ordering process"),(0,n.kt)("li",{parentName:"ul"},"then the final step after that is paying with a credit card"))),(0,n.kt)("li",{parentName:"ul"},"describe a monitoring system",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"in an internet of things kind of application, let's say we have sensors on manufacturing equipment and these sensors collect several different measurements like temperature, relative humidity, maybe some measure of vibration in the machine, and these measurements are collected every, 30 seconds and they're transmitted to a device in the building"),(0,n.kt)("li",{parentName:"ul"},"we have multiple pieces of manufacturing equipment and they're located in buildings, and we have multiple buildings, and these buildings are on campuses, and we have multiple campuses around the world"),(0,n.kt)("li",{parentName:"ul"},"the sensors don't necessarily communicate directly say with a database, but it might communicate with an Edge device, and there might be one Edge device in each building, and the Edge device collects data and transmits it maybe in an aggregate form or does some pre-processing and then transmits that data to either an on-premise database or a cloud data store"),(0,n.kt)("li",{parentName:"ul"},"what we see in this example is that we can start identifying the key entities or things like the specific piece of manufacturing equipment",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"The sensor has a particular ID and certain attributes about it"),(0,n.kt)("li",{parentName:"ul"},"the Edge device is another important piece of equipment that we're going to need to model as well"))))))))),(0,n.kt)("li",{parentName:"ul"},"questions to ask",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"First is what business process is being modeled?"),(0,n.kt)("li",{parentName:"ul"},"Next we ask what business objects or artifacts are used in the process?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: in the insurance industry, there's something called the claims form",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"The claims form has a lot of different information about a particular event, like in healthcare, it might be an injury, or in homeowner's insurance, it might be a natural disaster"),(0,n.kt)("li",{parentName:"ul"},"there are these forms that get filled out",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"the forms are rich with information in terms of the kinds of things that we need to model, which we want to look for"))))))),(0,n.kt)("li",{parentName:"ul"},"What are those kind of business artifacts that are used? what's being analyzed? what is needed to perform that analysis?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"this is especially important when we're working with any kind of analytical database, for example data warehousing, business intelligence, or data science"),(0,n.kt)("li",{parentName:"ul"},"We want to understand is it a sales process?"),(0,n.kt)("li",{parentName:"ul"},"Is it an inventory levels that we're trying to monitor?"),(0,n.kt)("li",{parentName:"ul"},"Is it, are we looking to try and understand what kind of anomalous events precede failures in manufacturing equipment?")))))),(0,n.kt)("h4",{id:"high-level-physical-design"},"High-level physical design"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"it is the kind of thinking through how we want the data organized on our storage systems",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we're actually thinking about the physical layout of data relative to other pieces of data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"how data is organized on persistent storage"))),(0,n.kt)("li",{parentName:"ul"},"there are a couple of things that we think about in terms of abstractions",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"One is called the tablespace",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"tablespaces are ways of grouping data"),(0,n.kt)("li",{parentName:"ul"},"we do that at a schema level"))),(0,n.kt)("li",{parentName:"ul"},"there's also something called partitions",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we use those at a table or index level"))),(0,n.kt)("li",{parentName:"ul"},"both tablespaces and partitions allow us to take advantage of parallel operations like parallel writes and parallel reads",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"parallelization is a key element of scalable databases"))),(0,n.kt)("li",{parentName:"ul"},"using caching to improve read performance",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This is part of high-level physical design, but it's something that's often postponed or put off until later, until we see how much efficiency and performance we can squeeze out of other things",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Like how we optimize our tablespaces and partitions"),(0,n.kt)("li",{parentName:"ul"},"once we've sort of exhausted the above and gotten as much out of those as we can, then we turn to other things like caching"))))))))),(0,n.kt)("li",{parentName:"ul"},"tablespace",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"it is a storage location for physically storing data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we're specifying a file on a particular device on a particular disc"))),(0,n.kt)("li",{parentName:"ul"},"it doesn't dictate logical organization",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"That's something we do in the logical model and we have table structures and things like that"))),(0,n.kt)("li",{parentName:"ul"},"data from related tables and indexes stores in the same tablespace",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Tablespaces are more of an aggregate object, basically a large object that we treat as a single unit"),(0,n.kt)("li",{parentName:"ul"},"we use tablespaces and create different table spaces in ways that optimize read and write performance",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: if we have a table, an index on that table, we might want to put them in different tablespaces",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"that's because we want those different tablespaces on different storage devices or different drivers, so that when we're trying to say read from a table while we're also simultaneously reading or writing to the index, we're not both competing for the same IO resources"),(0,n.kt)("li",{parentName:"ul"},"So we're basically distributing the workload across our physical devices"),(0,n.kt)("li",{parentName:"ul"},"that's one of the things we get to do with tablespaces"))))))),(0,n.kt)("li",{parentName:"ul"},"data within a tablespace is managed as a single unit from a tablespace perspective",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"e.g.: if you're dropping a tablespace, you're dropping everything in that tablespace",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"thus you want to consider that when organizing these"))))))),(0,n.kt)("li",{parentName:"ul"},"partitions",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"the are used for segmenting data within a table",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"the way we do this is we basically break up a table or the data stored in a table and allocate it or store it in different subsections",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"those subsections are called partitions"))))),(0,n.kt)("li",{parentName:"ul"},"partition selected by partition key",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we decide which subsection each row goes in based on the partition key"),(0,n.kt)("li",{parentName:"ul"},"thus one or more of the attributes in the table will determine where a particular piece of data will land in terms of which partition it goes in"))),(0,n.kt)("li",{parentName:"ul"},"multiple ways to partition data",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"time-based partition")," (most common)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"this is useful if you have time-series data, where you have data that's very time oriented"),(0,n.kt)("li",{parentName:"ul"},"the data might arrive, for example, in a streaming application we might have data streaming in continually, and we might have say a partition based on a day",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"So each day we create a new partition and any data that comes in on a particular day is written to that day's partition"),(0,n.kt)("li",{parentName:"ul"},"that allows us to easily manage partitions"))),(0,n.kt)("li",{parentName:"ul"},"e.g.: if we know at the start a new day, we need to add a partition",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"We may decide that we're going to keep 30 days worth of data"),(0,n.kt)("li",{parentName:"ul"},"At the end of 30 days, we're going to drop one of the oldest partition"),(0,n.kt)("li",{parentName:"ul"},"So time-based partition works well with time-series data or anything that's highly time oriented"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"list based partition"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Sometimes the organization is based more on categories of things"),(0,n.kt)("li",{parentName:"ul"},"e.g.: if you have a product inventory database and you want to partition, you might partition by product category",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"for example, electronics might be in one partition and clothing might be in another partition and housewares in a third partition"),(0,n.kt)("li",{parentName:"ul"},"List partitions work well in those situations"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"hash based partition"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"this works well when it's not obvious that you should be using time or there's not a particular category or lists that you can use for partitioning"),(0,n.kt)("li",{parentName:"ul"},"there may be times where there's really not any logical attribute that really stands out",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"maybe what you really want to do is just evenly distribute the data across, say, 10 partitions or 20 partitions, but you don't have a good key that like balances across all of them"),(0,n.kt)("li",{parentName:"ul"},"in that case, you might use something called hash-based partitioning, where you have some attribute, you do a hash of that partition, and then you use that to decide which of indifferent partitions, the particular row should be stored in"))))))))),(0,n.kt)("li",{parentName:"ul"},"summary",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"the physical design significantly can impact performance"),(0,n.kt)("li",{parentName:"ul"},"what we're really trying to do is take advantage of the ability to parallelize operations"),(0,n.kt)("li",{parentName:"ul"},"we need to consider the physical, as well as the logical organization",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"They're both crucial for different things"),(0,n.kt)("li",{parentName:"ul"},"logical organization will help us keep our data consistent",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"It'll make it easy to query"),(0,n.kt)("li",{parentName:"ul"},"The operations that we do on the database are largely driven by the logical organization, but the performance, in terms of how well things read and write, are also significantly impacted by our physical design"))),(0,n.kt)("li",{parentName:"ul"},"two sort of tools in our tool chest for managing physical design, are tablespaces and partitioning",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"we want to take advantage of those as we think about how we can parallelize different parts of our system and the operations on those systems")))))))),(0,n.kt)("h3",{id:"data-ingestion"},"Data Ingestion"),(0,n.kt)("h4",{id:"human-scale-and-machine-scale-data"},"human-scale and machine-scale data"),(0,n.kt)("h4",{id:"different-data-ingestion-strategies"},"different data ingestion strategies"),(0,n.kt)("h4",{id:"designing-scalable-user-interfaces"},"designing scalable user interfaces"),(0,n.kt)("h4",{id:"message-queues-to-buffer-ingested-data"},"message queues to buffer ingested data"),(0,n.kt)("h4",{id:"data-modeling-for-scale-event-sourcing"},"data modeling for scale: event sourcing"),(0,n.kt)("h4",{id:"distributing-workload-command-query-response-separation-cqsr"},"distributing workload: Command Query Response Separation (CQSR)"),(0,n.kt)("h3",{id:"designing-for-scalable-querying"},"Designing for Scalable Querying"),(0,n.kt)("h4",{id:"transactional-vs-analytical-queries"},"transactional vs analytical queries"),(0,n.kt)("h4",{id:"indexing-for-transactional-queries"},"indexing for transactional queries"),(0,n.kt)("h4",{id:"materialized-views-for-transactional-queries"},"materialized views for transactional queries"),(0,n.kt)("h4",{id:"using-read-replicas-to-improve-query-performance"},"using read replicas to improve query performance"),(0,n.kt)("h4",{id:"understanding-write-ahead-logging"},"understanding write ahead logging"),(0,n.kt)("h4",{id:"de-normalizing-for-analytical-queries"},"de-normalizing for analytical queries"),(0,n.kt)("h4",{id:"aggregation-and-sampling-for-analytical-queries"},"aggregation and sampling for analytical queries"),(0,n.kt)("h3",{id:"devops-for-scalable-relational-databases"},"DevOps for Scalable Relational Databases"),(0,n.kt)("h4",{id:"monitoring-relational-databases"},"monitoring relational databases"),(0,n.kt)("h4",{id:"reducing-latency-with-caching"},"reducing latency with caching"),(0,n.kt)("h4",{id:"partitioning-for-scalability"},"partitioning for scalability"),(0,n.kt)("h4",{id:"high-availability-architectures"},"high-availability architectures"),(0,n.kt)("h4",{id:"data-lifecycle-management"},"data lifecycle management"))}m.isMDXComponent=!0}}]);